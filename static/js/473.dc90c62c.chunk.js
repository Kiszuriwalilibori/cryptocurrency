"use strict";(self.webpackChunkcryptocurrency_tracker=self.webpackChunkcryptocurrency_tracker||[]).push([[473],{6913:(e,r,t)=>{t.d(r,{kt:()=>x,Qr:()=>u,z4:()=>p,y1:()=>j,zh:()=>C,nK:()=>i,dK:()=>g,UD:()=>l.Z});var n=t(4569),a=t.n(n),c=t(2791),s=t(9714),o=t(3110);const i=()=>{const[e,r]=(0,c.useState)(null),[t,n]=(0,c.useState)(!1),[i,,u]=x(!0),d=(0,l.Z)();let h=[];const p=(0,c.useCallback)((()=>{n(!0),d.error("No data fetched at all for given endpoints")}),[]),y=()=>{u(),h.length?r(h):p()},m=async(e,r)=>{if(e.length){let t=e.shift(),n=[...e];t&&a().get(t,{Apikey:"feca5a4838bd3042b5340fb60de7c44aadd2d20a178514c44947c3736be3558e"}).then((e=>{if(e.hasOwnProperty("data"))e.data.hasOwnProperty(r)?h.push(e.data[r]):h.push(s.W.na),n.length?m(n,r):y();else{u();const e=t||"unknown crypto";d.warning("Data for ".concat(e," was broken, corrupted or otherwise invalid"))}})).catch((e=>{let a=e.response?e.response.status:e;d.warning("Error ".concat(a," encountered when fetching data for ").concat(t)),n.length?m(n,r):y()}))}else n(!0),d.error("Empty array of URLs passed to useAxiosArray as argument")};return{data:e,error:t,loading:i,fetchHistoricalPrices:(e,r)=>{m(o.pi.historical(e,r),r)}}};var l=t(6333);const u=()=>{(0,l.Z)();const e=(0,c.useRef)(!1);return e.current=!0,e.current};var d=t(7689),h=t(3688);const p=e=>{const{currencyBase:r,currencyCrypto:t}=e,n=(0,d.s0)(),{setCurrencyBase:a,setCurrencyCrypto:s}=(0,c.useContext)(h.P),o=!(!r||!t),i=o?"exchange rate for pair ".concat(t.label,":").concat(r):void 0;return{confirmChoice:(0,c.useCallback)((()=>{a(r),s(t),i&&n(i,{state:{results:i}})}),[i]),isEnabled:o}};var y=t(9478),m=t(1933);const f=e=>{const r=e.data.Data,t=[];for(let n in r)r.hasOwnProperty(n)&&t.push({value:n,label:r[n].CoinName,image:r[n].ImageUrl,description:r[n].Description});return t},g=()=>{const e=(0,l.Z)(),{isLoading:r,error:t,data:n}=(0,m.useQuery)([URL],(()=>a()(y._n.get("all"))),{staleTime:3e5,cacheTime:3e5,select:e=>f(e)});return(0,c.useEffect)((()=>{t&&e.error("B\u0142\u0105d pobierania listy kryptowalut")}),[t]),{isLoading:r,data:n}};const x=function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];const[r,t]=(0,c.useState)(e),n=(0,c.useCallback)((()=>{t(!1)}),[]),a=(0,c.useCallback)((()=>{t(!r)}),[r]);return[r,function(){t(!0)},n,a]};var v=t(8573),b=t.n(v);const j=function(e,r){return(0,c.useCallback)(b()((()=>{e(r)}),200),[e,r])},k=1e3,w=1e3,C=function(e){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:k,t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:w;const[n,a]=(0,c.useState)(!1),s=(0,c.useRef)(void 0),o=(0,c.useRef)(void 0),i=(0,c.useRef)(void 0);return(0,c.useEffect)((()=>(e&&(o.current=Date.now(),s.current=setTimeout((()=>{a(!0)}),r)),e||o.current&&(Date.now()>=o.current+r&&(i.current=setTimeout((()=>{s.current&&clearTimeout(s.current),a(!1)}),t-(Date.now()-(o.current+k)))),Date.now()<o.current+r&&(s.current&&clearTimeout(s.current),a(!1))),()=>{s.current&&clearTimeout(s.current),i.current&&clearTimeout(i.current)})),[e]),n}},8819:(e,r,t)=>{t.r(r),t.d(r,{default:()=>s});var n=t(6913),a=t(5903),c=t(184);const s=e=>{const{isOK:r,error:t,crypto:s}=e,o=(0,n.UD)();return t&&o.error("Podczas pobierania danych bie\u017c\u0105cych dla ".concat(s," wyst\u0105pi\u0142 b\u0142\u0105d ")),r?null:(0,c.jsx)(a.aN,{})}},6499:(e,r,t)=>{t.r(r),t.d(r,{default:()=>o});var n=t(3208),a=t(8850),c=t(4154),s=t(184);const o=e=>{const{currencyCrypto:r,results:t}=e;return(0,s.jsx)(c.z,{children:(0,s.jsx)(n.Z,{in:!0,timeout:1e3,children:(0,s.jsxs)("section",{className:"DataContainer","aria-label":"query data",children:[(0,s.jsx)(a.Hc,{currencyCryptoName:r.label}),r.imageURL&&(0,s.jsx)(a.TR,{imageURL:r.imageURL}),(0,s.jsxs)("div",{className:"PricesWithButtons",children:[t.currentPrice&&(0,s.jsx)(a.Wc,{currentPrice:t.currentPrice}),t.changes&&(0,s.jsx)(a.Jk,{changesArray:t.changes}),(0,s.jsx)(a.Rr,{})]})]})})})}},8850:(e,r,t)=>{t.d(r,{Jk:()=>g,Wc:()=>c,Hc:()=>o,Rr:()=>h,TR:()=>y,pA:()=>v});t(8819);var n=t(890),a=t(184);const c=e=>{const{currentPrice:r}=e;return(0,a.jsxs)("div",{className:"cell",children:[(0,a.jsx)(n.Z,{variant:"purpleText",children:Object.values(r)[0]}),(0,a.jsx)(n.Z,{variant:"greyText",children:Object.keys(r)[0]})]})};var s=t(2791);const o=(0,s.memo)((e=>{const{currencyCryptoName:r}=e;return(0,a.jsxs)("div",{className:"GeneralInformation",children:[(0,a.jsx)("div",{className:"title",children:r}),(0,a.jsx)("div",{className:"foundation",children:"".concat(r," foundation")}),(0,a.jsx)("div",{className:"altcoins",children:"Altcoins - hightest growth"})]})}));var i=t(6151),l=t(2150);const u={backgroundColor:"#F5C200",border:'1px solid "#EE760A"',boxShadow:'inset 0 0 5px "#EE760A"',color:"rgba(0, 0, 0, 0.87)",fontSize:11},d=()=>(0,a.jsx)("div",{className:"cell",children:(0,a.jsx)("div",{className:"InvestWrapper",children:(0,a.jsx)(l.Z,{componentsProps:{tooltip:{sx:u}},title:"Ta funkcjonalno\u015b\u0107 nie jest jeszcze zaimplementowana",placement:"top-start",children:(0,a.jsx)(i.Z,{variant:"contained",color:"error",size:"small",children:"Inwestuj"})})})}),h=(0,s.memo)(d);var p=t(9478);const y=e=>{const{imageURL:r}=e,t=p._n.get("general")+r+"?width=30";return(0,a.jsx)("img",{className:"logo",src:t,alt:"Logo"})};t(6499);var m=t(6666),f=t.n(m);const g=e=>{const{changesArray:r}=e;return(0,a.jsx)(a.Fragment,{children:r.map((e=>(0,a.jsxs)("div",{className:"cell",children:[(0,a.jsx)(n.Z,{variant:"purpleText",children:Object.values(e)[0]},f()()),(0,a.jsx)(n.Z,{variant:"greyText",children:Object.keys(e)[0]},f()())]},f()())))})};t(4154);const x=e=>{const{text:r}=e;return(0,a.jsx)("h1",{role:"banner",className:"sr-only",children:r})},v=s.memo(x)},4154:(e,r,t)=>{t.d(r,{z:()=>c});var n=t(3457),a=t(4554);const c=(0,n.Z)(a.Z)((e=>{let{theme:r}=e;return{width:"100%",paddingRight:r.spacing(2),paddingLeft:r.spacing(2),marginRight:"auto",marginLeft:"auto",marginTop:"30vh"}}))},4473:(e,r,t)=>{t.r(r),t.d(r,{default:()=>g});var n=t(2791),a=t(4569),c=t.n(a),s=t(7689),o=t(1933),i=t(6913),l=t(5903),u=t(3110),d=t(9478),h=t(3688),p=t(8850),y=t(184);const m=n.lazy((()=>Promise.resolve().then(t.bind(t,6499)))),f=n.lazy((()=>Promise.resolve().then(t.bind(t,8819)))),g=()=>{const e=(0,s.s0)(),r=(0,i.UD)(),{currencyBase:t,currencyCrypto:a}=n.useContext(h.P),g=d.XJ,x=u.pi.current(a.value,t),[v,b]=n.useState(null),{data:j,error:k}=(0,o.useQuery)("currentCrypto",(async()=>{(0,u.l4)(g)&&C(a,t);return(await c().get(x,{Apikey:"feca5a4838bd3042b5340fb60de7c44aadd2d20a178514c44947c3736be3558e"})).data}),{refetchInterval:g}),{data:w,fetchHistoricalPrices:C}=(0,i.nK)(),N=(0,i.y1)(e,"/");return n.useEffect((()=>{C(a,t)}),[]),n.useEffect((()=>{if(j&&w){let e=j[t];"number"===typeof e?r.success("Zmiana"):r.info("Na serwerze nie ma danych o bie\u017c\u0105cym kursie kryptowaluty");const n=(0,u.DK)({cryptoPrice:e,historicalCryptoPrice:w,currencyBase:t});JSON.stringify(v)!==JSON.stringify(n)&&b(n)}}),[j,w]),(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(p.pA,{text:"Results of query"}),(0,y.jsxs)("main",{children:[(k||!v)&&(0,y.jsx)(n.Suspense,{fallback:null,children:(0,y.jsx)(f,{crypto:a.label,isOK:Boolean(v),error:k})}),v&&(0,y.jsx)(l.El,{label:"Powr\xf3t do wyboru",clickHandler:N}),v&&(0,y.jsx)(n.Suspense,{fallback:null,children:(0,y.jsx)(m,{currencyCrypto:a,results:v})})]})]})}}}]);
//# sourceMappingURL=473.dc90c62c.chunk.js.map