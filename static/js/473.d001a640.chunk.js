"use strict";(self.webpackChunkcryptocurrency_tracker=self.webpackChunkcryptocurrency_tracker||[]).push([[473],{6415:function(e,r,n){n.d(r,{Qr:function(){return y},z4:function(){return v},nK:function(){return d},dK:function(){return C},UD:function(){return p.Z}});var t=n(4165),a=n(3433),c=n(5861),u=n(9439),o=n(4569),i=n.n(o),s=n(2791),f=n(9714),l=n(3110),d=function(){var e=(0,s.useState)(null),r=(0,u.Z)(e,2),n=r[0],o=r[1],d=(0,s.useState)(!1),y=(0,u.Z)(d,2),h=y[0],b=y[1],v=(0,s.useState)(!0),k=(0,u.Z)(v,2),g=k[0],w=k[1],C=(0,p.Z)(),m=[],Z=(0,s.useCallback)((function(){b(!0),C.error("No data fetched at all for given endpoints")}),[]),x=function(){w(!1),m.length?o(m):Z()},P=function(){var e=(0,c.Z)((0,t.Z)().mark((function e(r,n){var c,u;return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r.length?(c=r.shift(),u=(0,a.Z)(r),i().get(c,{Apikey:"feca5a4838bd3042b5340fb60de7c44aadd2d20a178514c44947c3736be3558e"}).then((function(e){if(e.hasOwnProperty("data"))e.data.hasOwnProperty(n)?m.push(e.data[n]):m.push(f.W.na),u.length?P(u,n):x();else{w(!1);var r=c||"unknown location";C.warning("Data for ".concat(r," was broken, corrupted or otherwise invalid"))}})).catch((function(e){var r=e.response?e.response.status:e;C.warning("Error ".concat(r," encountered when fetching data for ").concat(c)),u.length?P(u,n):x()}))):(b(!0),C.error("Empty array of URLs passed to useAxiosArray as argument"));case 1:case"end":return e.stop()}}),e)})));return function(r,n){return e.apply(this,arguments)}}();return{data:n,error:h,loading:g,fetchHistoricalPrices:function(e,r){P(l.pi.historical(e,r),r)}}},p=n(6333),y=function(){(0,p.Z)();var e=(0,s.useRef)(!1);return e.current=!0,e.current},h=n(7689),b=n(3688),v=function(e){var r=e.currencyBase,n=e.currencyCrypto,t=(0,h.s0)(),a=(0,s.useContext)(b.P),c=a.setCurrencyBase,u=a.setCurrencyCrypto,o=!(!r||!n),i=o?"exchange rate for pair ".concat(n.label,":").concat(r):void 0;return{confirmChoice:(0,s.useCallback)((function(){c(r),u(n),i&&t(i,{state:{results:i}})}),[i]),isEnabled:o}},k=n(9478),g=n(1933),w=function(e){var r=e.data.Data,n=[];for(var t in r)r.hasOwnProperty(t)&&n.push({value:t,label:r[t].CoinName,image:r[t].ImageUrl,description:r[t].Description});return n},C=function(){var e=(0,p.Z)(),r=(0,g.useQuery)([URL],(function(){return i()(k.v2.get("all"))}),{staleTime:3e5,cacheTime:3e5,select:function(e){return w(e)}}),n=r.isLoading,t=r.error,a=r.data;return(0,s.useEffect)((function(){t&&e.error("B\u0142\u0105d pobierania listy kryptowalut")}),[t]),{isLoading:n,data:a}}},4473:function(e,r,n){n.r(r),n.d(r,{default:function(){return g}});var t=n(4165),a=n(5861),c=n(9439),u=n(2791),o=n(4569),i=n.n(o),s=n(7689),f=n(1933),l=n(6415),d=n(1644),p=n(3110),y=n(9478),h=n(3688),b=n(184),v=u.lazy((function(){return Promise.all([n.e(228),n.e(719),n.e(561)]).then(n.bind(n,3561))})),k=u.lazy((function(){return n.e(819).then(n.bind(n,8819))})),g=function(){var e=(0,s.s0)(),r=(0,l.UD)(),n=u.useContext(h.P),o=n.currencyBase,g=n.currencyCrypto,w=y.Ed,C=p.pi.current(g.value,o),m=u.useState(null),Z=(0,c.Z)(m,2),x=Z[0],P=Z[1],E=(0,f.useQuery)("currentCrypto",(0,a.Z)((0,t.Z)().mark((function e(){var r;return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(0,p.l4)(w)&&N(g,o),e.next=3,i().get(C,{Apikey:"feca5a4838bd3042b5340fb60de7c44aadd2d20a178514c44947c3736be3558e"});case 3:return r=e.sent,e.abrupt("return",r.data);case 5:case"end":return e.stop()}}),e)}))),{refetchInterval:w}),S=E.data,j=E.error,B=(0,l.nK)(),D=B.data,N=B.fetchHistoricalPrices,O=u.useCallback((function(){e("/")}),[]);return u.useEffect((function(){N(g,o)}),[]),u.useEffect((function(){if(S&&D){var e=S[o];"number"===typeof e?r.success("Zmiana"):r.info("Na serwerze nie ma danych o bie\u017c\u0105cym kursie kryptowaluty");var n=(0,p.DK)({cryptoPrice:e,historicalCryptoPrice:D,currencyBase:o});JSON.stringify(x)!==JSON.stringify(n)&&P(n)}}),[S,D]),(0,b.jsxs)("main",{children:[(j||!x)&&(0,b.jsx)(u.Suspense,{fallback:null,children:(0,b.jsx)(k,{crypto:g.label,result:Boolean(x),error:j})}),x&&(0,b.jsx)(d.El,{label:"Powr\xf3t do wyboru",clickHandler:O}),x&&(0,b.jsx)(u.Suspense,{fallback:null,children:(0,b.jsx)(v,{currencyCrypto:g,results:x})})]})}}}]);
//# sourceMappingURL=473.d001a640.chunk.js.map