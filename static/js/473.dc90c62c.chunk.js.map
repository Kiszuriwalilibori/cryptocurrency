{"version":3,"file":"static/js/473.dc90c62c.chunk.js","mappings":"uQAQA,MAyEA,EAzEiC,KAC7B,MAAOA,EAAMC,IAAWC,EAAAA,EAAAA,UAAkC,OACnDC,EAAOC,IAAYF,EAAAA,EAAAA,WAAS,IAC5BG,EAAQ,CAAGC,GAAeC,GAAW,GACtCC,GAAcC,EAAAA,EAAAA,KAEpB,IAAIC,EAAqC,GAEzC,MAAMC,GAAaC,EAAAA,EAAAA,cAAY,KAC3BR,GAAS,GACTI,EAAYL,MAAM,6CAA6C,GAGhE,IAEGU,EAAmC,KACrCP,IAEII,EAAiBI,OACjBb,EAAQS,GAERC,GACJ,EAGEI,EAAYC,MAAOC,EAAqBC,KAC1C,GAAID,EAAUH,OAAQ,CAClB,IAAIK,EAAMF,EAAUG,QAChBC,EAAmB,IAAIJ,GAE3BE,GACIG,IAAAA,IACSH,EAAK,CAAEI,OAAQC,qEACnBC,MAAKzB,IACF,GAAIA,EAAK0B,eAAe,QAChB1B,EAAKA,KAAK0B,eAAeR,GACzBR,EAAiBiB,KAAK3B,EAAKA,KAAKkB,IAEhCR,EAAiBiB,KAAKC,EAAAA,EAAAA,IAGtBP,EAAiBP,OACjBC,EAAUM,EAAkBH,GAE5BL,QAED,CACHP,IACA,MAAMuB,EAAQV,GAAY,iBAC1BX,EAAYsB,QAAQ,YAAD,OAAaD,EAAK,+CACzC,KAEHE,OAAMC,IACH,IAAIC,EAAOD,EAAIE,SAAWF,EAAIE,SAASC,OAASH,EAChDxB,EAAYsB,QAAQ,SAAD,OAAUG,EAAI,+CAAuCd,IACpEE,EAAiBP,OACjBC,EAAUM,EAAkBH,GAE5BL,GACJ,GAEhB,MACIT,GAAS,GACTI,EAAYL,MAAM,0DACtB,EAMJ,MAAO,CAAEH,OAAMG,QAAOE,UAAS+B,sBAJD,CAACC,EAAgCnB,KAC3DH,EAAUuB,EAAAA,GAAAA,WAAqBD,EAAgBnB,GAAeA,EAAa,EAGzB,E,cC3E1D,MAaA,EAbuB,MACCT,EAAAA,EAAAA,KAApB,MAEM8B,GAAoBC,EAAAA,EAAAA,SAAO,GAOjC,OAFID,EAAkBE,SAAU,EAEzBF,EAAkBE,OAAO,E,wBCCpC,MAiBA,EAjB0BC,IACtB,MAAM,aAAEC,EAAY,eAAEN,GAAmBK,EACnCE,GAAWC,EAAAA,EAAAA,OACX,gBAAEC,EAAe,kBAAEC,IAAsBC,EAAAA,EAAAA,YAAWC,EAAAA,GACpDC,KAAYP,IAAgBN,GAC5Bc,EAAgBD,EAAS,iCAA6Bb,EAAeR,MAAK,YAAIc,QAAiBS,EASrG,MAAO,CAAEC,eAPazC,EAAAA,EAAAA,cAAY,KAC9BkC,EAAgBH,GAChBI,EAAkBV,GACdc,GAAeP,EAASO,EAAe,CAAEG,MAAO,CAAEC,QAASJ,IAAkB,GAElF,CAACA,IAEoBD,YAAW,E,wBCtBvC,MAmBA,EAnBuBM,IACnB,MAAMxD,EAAOwD,EAAIxD,KAAKyD,KAEhBC,EAAS,GAEf,IAAK,IAAIC,KAAQ3D,EACTA,EAAK0B,eAAeiC,IACpBD,EAAO/B,KAAK,CACRiC,MAAOD,EACP9B,MAAO7B,EAAK2D,GAAME,SAClBC,MAAO9D,EAAK2D,GAAMI,SAClBC,YAAahE,EAAK2D,GAAMM,cAKpC,OAAOP,CAAM,ECIjB,EAjB8B,KAC1B,MAAMlD,GAAcC,EAAAA,EAAAA,MAEd,UAAEyD,EAAS,MAAE/D,EAAK,KAAEH,IAASmE,EAAAA,EAAAA,UAAS,CAAChD,MAAM,IAAMG,IAAM8C,EAAAA,GAAAA,IAAa,SAAS,CACjFC,UAAW,IACXC,UAAW,IACXC,OAAQvE,GAAQwE,EAAcxE,KAQlC,OALAyE,EAAAA,EAAAA,YAAU,KACNtE,GAASK,EAAYL,MAAM,8CAAoC,GAEhE,CAACA,IAEG,CAAE+D,YAAWlE,OAAM,ECH9B,QAlBA,WAAoD,IAAhC0E,EAAqB,wDACrC,MAAOd,EAAOe,IAAYzE,EAAAA,EAAAA,UAASwE,GAM7BE,GAAWhE,EAAAA,EAAAA,cAAY,KACzB+D,GAAS,EAAM,GAChB,IAEGE,GAASjE,EAAAA,EAAAA,cAAY,KACvB+D,GAAUf,EAAM,GACjB,CAACA,IAEJ,MAAO,CAACA,EAZR,WACIe,GAAS,EACb,EAUwBC,EAAUC,EACtC,E,uBCSA,QAXA,SAAiCC,EAAcC,GAQ3C,OAN2CnE,EAAAA,EAAAA,aACvCoE,KAAS,KACLF,EAAGC,EAAK,GACT,KACH,CAACD,EAAIC,GAGb,ECvBME,EAAQ,IACRC,EAAW,IAsCjB,EApCmC,SAACC,GAA4D,IAAxCC,EAAK,uDAAGH,EAAOI,EAAQ,uDAAGH,EAChF,MAAOI,EAAkBC,IAAuBrF,EAAAA,EAAAA,WAAS,GACnDsF,GAAehD,EAAAA,EAAAA,aAAOY,GACtBqC,GAAYjD,EAAAA,EAAAA,aAAOY,GACnBsC,GAAkBlD,EAAAA,EAAAA,aAAOY,GA6B/B,OA3BAqB,EAAAA,EAAAA,YAAU,KACJU,IACFM,EAAUhD,QAAUkD,KAAKC,MACzBJ,EAAa/C,QAAUoD,YAAW,KAChCN,GAAoB,EAAK,GACxBH,IAEAD,GACCM,EAAUhD,UACRkD,KAAKC,OAASH,EAAUhD,QAAU2C,IACpCM,EAAgBjD,QAAUoD,YAAW,KACnCL,EAAa/C,SAAWqD,aAAaN,EAAa/C,SAClD8C,GAAoB,EAAM,GACzBF,GAAYM,KAAKC,OAASH,EAAUhD,QAAUwC,MAE/CU,KAAKC,MAAQH,EAAUhD,QAAU2C,IACnCI,EAAa/C,SAAWqD,aAAaN,EAAa/C,SAClD8C,GAAoB,KAInB,KACLC,EAAa/C,SAAWqD,aAAaN,EAAa/C,SAClDiD,EAAgBjD,SAAWqD,aAAaJ,EAAgBjD,QAAQ,IAEjE,CAAC0C,IAEGG,CACT,C,gFCxBA,MAWA,EAX8B5C,IAC1B,MAAM,KAAEqD,EAAI,MAAE5F,EAAK,OAAE6F,GAAWtD,EAC1BlC,GAAcC,EAAAA,EAAAA,MAIpB,OAFAN,GAASK,EAAYL,MAAM,qDAAD,OAA4C6F,EAAM,wCAEvED,EAEE,MAFW,SAAC,KAAM,GAEd,C,0FCNf,MAoBA,EApBsBrD,IAClB,MAAM,eAAEL,EAAc,QAAEkB,GAAYb,EAEpC,OACI,SAAC,IAAe,WACZ,SAACuD,EAAA,EAAI,CAACC,IAAI,EAAMC,QAAS,IAAK,UAC1B,qBAASC,UAAU,gBAAgB,aAAW,aAAY,WACtD,SAAC,KAAkB,CAACC,mBAAoBhE,EAAeR,QACtDQ,EAAeiE,WAAY,SAAC,KAAI,CAACA,SAAUjE,EAAeiE,YAC3D,iBAAKF,UAAU,oBAAmB,UAC7B7C,EAASgD,eAAgB,SAAC,KAA0B,CAACA,aAAchD,EAASgD,eAC5EhD,EAASiD,UAAW,SAAC,KAAO,CAACC,aAAclD,EAASiD,WACrD,SAAC,KAAY,aAIX,C,8GCrB1B,MAWA,EAXsB9D,IAClB,MAAM,aAAE6D,GAAiB7D,EAEzB,OACI,iBAAK0D,UAAU,OAAM,WACjB,SAACM,EAAA,EAAU,CAACC,QAAQ,aAAY,SAAEC,OAAOC,OAAON,GAAc,MAC9D,SAACG,EAAA,EAAU,CAACC,QAAQ,WAAU,SAAEC,OAAOE,KAAKP,GAAc,OACxD,E,cCRd,MAWA,GAXoBQ,EAAAA,EAAAA,OAAMrE,IACtB,MAAM,mBAAE2D,GAAuB3D,EAC/B,OACI,iBAAK0D,UAAU,qBAAoB,WAC/B,gBAAKA,UAAU,QAAO,SAAEC,KACxB,gBAAKD,UAAU,aAAY,mBAAKC,EAAkB,kBAClD,gBAAKD,UAAU,WAAU,SAAC,iCACxB,I,wBCZd,MAAMY,EAAe,CACjBC,gBAAiB,UACjBC,OAAO,sBACPC,UAAU,0BACVC,MAAO,sBACPC,SAAU,IAORC,EAAe,KAEb,gBAAKlB,UAAU,OAAM,UACjB,gBAAKA,UAAU,gBAAe,UAC1B,SAACmB,EAAA,EAAO,CACJC,gBAAiB,CAAEC,QAAS,CAAEC,GAAIV,IAClCW,MAAM,gEACNC,UAAU,YAAW,UAErB,SAACC,EAAA,EAAM,CAAClB,QAAQ,YAAYS,MAAM,QAAQU,KAAK,QAAO,SAAC,mBAS3E,GAAef,EAAAA,EAAAA,MAAKO,G,cC1BpB,MAQA,EARc5E,IACV,MAAM,SAAE4D,GAAa5D,EAEfqF,EAAgB3D,EAAAA,GAAAA,IAAa,WAAakC,EAAW,YAE3D,OAAO,gBAAKF,UAAU,OAAO4B,IAAKD,EAAeE,IAAK,QAAU,E,+BCDpE,MAoBA,EApBiBvF,IACb,MAAM,aAAE+D,GAAiB/D,EAEzB,OACI,8BACK+D,EAAayB,KAAIC,IACd,iBAAK/B,UAAU,OAAM,WACjB,SAACM,EAAA,EAAU,CAACC,QAAQ,aAAY,SAC3BC,OAAOC,OAAOsB,GAAQ,IADWC,QAItC,SAAC1B,EAAA,EAAU,CAACC,QAAQ,WAAU,SACzBC,OAAOE,KAAKqB,GAAQ,IADWC,SALbA,UAUhC,E,QCxBJ,MAAMC,EAAqB3F,IAC9B,MAAM,KAAE4F,GAAS5F,EACjB,OACI,eAAI6F,KAAK,SAASnC,UAAU,UAAS,SAChCkC,GACA,EAIb,EAAeE,EAAAA,KAAWH,E,0DCZnB,MAAMI,GAAkBC,EAAAA,EAAAA,GAAOC,EAAAA,EAAPD,EAAY,QAAC,MAAEE,GAAO,QAAM,CACvDC,MAAO,OACPC,aAAcF,EAAMG,QAAQ,GAC5BC,YAAaJ,EAAMG,QAAQ,GAC3BE,YAAa,OACbC,WAAY,OACZC,UAAW,OACd,G,yKCED,MAAMC,EAAeZ,EAAAA,MAAW,IAAM,yCAChCa,EAAuBb,EAAAA,MAAW,IAAM,yCAyE9C,EAnEoB,KAChB,MAAM5F,GAAWC,EAAAA,EAAAA,MACXrC,GAAcC,EAAAA,EAAAA,OACd,aAAEkC,EAAY,eAAEN,GAAmBmG,EAAAA,WAAiBvF,EAAAA,GACpDqG,EAAaC,EAAAA,GACbC,EAAalH,EAAAA,GAAAA,QAAkBD,EAAeuB,MAAOjB,IACpDY,EAASkG,GAAcjB,EAAAA,SAAmC,OAEzDxI,KAAM0J,EAA0B,MAAEvJ,IAAUgE,EAAAA,EAAAA,UAChD,iBACAnD,WACQ2I,EAAAA,EAAAA,IAAeL,IACflH,EAAsBC,EAAgBM,GAI1C,aAFqBrB,IAAAA,IAAUkI,EAAY,CAAEjI,OAAQC,sEAEvCxB,IAAI,GAEtB,CACI4J,gBAAiBN,KAIjBtJ,KAAM6J,EAAqB,sBAAEzH,IAA0B0H,EAAAA,EAAAA,MAEzDC,GAAwBC,EAAAA,EAAAA,IAAwCpH,EAAU,KAsBhF,OApBA4F,EAAAA,WAAgB,KACZpG,EAAsBC,EAAgBM,EAAa,GAEpD,IAEH6F,EAAAA,WAAgB,KACZ,GAAIkB,GAA8BG,EAAuB,CACrD,IAAII,EAAcP,EAA2B/G,GAElB,kBAAhBsH,EAA0BzJ,EAAY0J,QAAQ,UACpD1J,EAAY2J,KAAK,sEAEtB,MAAMzG,GAAS0G,EAAAA,EAAAA,IAAc,CAAEH,cAAaJ,wBAAuBlH,iBAC/D0H,KAAKC,UAAU/G,KAAa8G,KAAKC,UAAU5G,IAC3C+F,EAAW/F,EAEnB,IAED,CAACgG,EAA4BG,KAG5B,iCACI,SAAC,KAAiB,CAACvB,KAAK,sBACxB,6BACMnI,IAAUoD,KACR,SAAC,WAAc,CAACgH,SAAU,KAAK,UAC3B,SAAClB,EAAoB,CAACrD,OAAQ3D,EAAeR,MAAOkE,KAAMyE,QAAQjH,GAAUpD,MAAOA,MAG1FoD,IAAW,SAAC,KAAU,CAAC1B,MAAM,sBAAmB4I,aAAcV,IAC9DxG,IACG,SAAC,WAAc,CAACgH,SAAU,KAAK,UAC3B,SAACnB,EAAY,CAAC/G,eAAgBA,EAAgBkB,QAASA,WAIpE,C","sources":["hooks/useFetchHistoricalPrices.ts","hooks/useCheckApiKey.ts","hooks/useConfirm.ts","functions/createOptions.ts","hooks/useFetchListOfCryptos.ts","hooks/useBoolean.ts","hooks/useDebouncedCallback.ts","hooks/useDelayedCondition.ts","pages/ResultsPage/components/FetchStatusIndicator.tsx","pages/ResultsPage/components/ResultsTable.tsx","pages/ResultsPage/components/CryptoCurrencyCurrentPrice.tsx","pages/ResultsPage/components/GeneralInformation.tsx","pages/ResultsPage/components/InvestButton.tsx","pages/ResultsPage/components/Logo.tsx","pages/ResultsPage/components/Changes.tsx","pages/ResultsPage/components/ResultsPageHeader.tsx","pages/ResultsPage/components/styles.tsx","pages/ResultsPage/ResultsPage.tsx"],"sourcesContent":["import axios from \"axios\";\r\n\r\nimport { useState, useCallback } from \"react\";\r\n\r\nimport { BaseCurrency, CurrencyCrypto, HistoricalPrices, NotAvailable } from \"types\";\r\nimport { CreateURL } from \"functions\";\r\nimport { useMessage, useBoolean } from \"hooks\";\r\n\r\nconst useFetchHistoricalPrices = () => {\r\n    const [data, setData] = useState<HistoricalPrices | null>(null);\r\n    const [error, setError] = useState(false);\r\n    const [loading, , stopLoading] = useBoolean(true);\r\n    const showMessage = useMessage();\r\n\r\n    let historicalPrices: HistoricalPrices = [];\r\n\r\n    const fatalError = useCallback(() => {\r\n        setError(true);\r\n        showMessage.error(`No data fetched at all for given endpoints`);\r\n\r\n        // eslint-disable-next-line react-hooks/exhaustive-deps\r\n    }, []);\r\n\r\n    const theEndOfRecursiveFetchLoopHandle = () => {\r\n        stopLoading();\r\n\r\n        if (historicalPrices.length) {\r\n            setData(historicalPrices);\r\n        } else {\r\n            fatalError();\r\n        }\r\n    };\r\n\r\n    const fetchData = async (endpoints: string[], baseCurrency: BaseCurrency) => {\r\n        if (endpoints.length) {\r\n            let URL = endpoints.shift();\r\n            let reducedEndpoints = [...endpoints];\r\n\r\n            URL &&\r\n                axios\r\n                    .get(URL, { Apikey: process.env.REACT_APP_API_KEY as string })\r\n                    .then(data => {\r\n                        if (data.hasOwnProperty(\"data\")) {\r\n                            if (data.data.hasOwnProperty(baseCurrency)) {\r\n                                historicalPrices.push(data.data[baseCurrency]);\r\n                            } else {\r\n                                historicalPrices.push(NotAvailable.na);\r\n                            }\r\n\r\n                            if (reducedEndpoints.length) {\r\n                                fetchData(reducedEndpoints, baseCurrency);\r\n                            } else {\r\n                                theEndOfRecursiveFetchLoopHandle();\r\n                            }\r\n                        } else {\r\n                            stopLoading();\r\n                            const label = URL ? URL : \"unknown crypto\";\r\n                            showMessage.warning(`Data for ${label} was broken, corrupted or otherwise invalid`);\r\n                        }\r\n                    })\r\n                    .catch(err => {\r\n                        let code = err.response ? err.response.status : err;\r\n                        showMessage.warning(`Error ${code} encountered when fetching data for ${URL}`);\r\n                        if (reducedEndpoints.length) {\r\n                            fetchData(reducedEndpoints, baseCurrency);\r\n                        } else {\r\n                            theEndOfRecursiveFetchLoopHandle();\r\n                        }\r\n                    });\r\n        } else {\r\n            setError(true);\r\n            showMessage.error(`Empty array of URLs passed to useAxiosArray as argument`);\r\n        }\r\n    };\r\n    const fetchHistoricalPrices = (currencyCrypto: CurrencyCrypto, baseCurrency: BaseCurrency) => {\r\n        fetchData(CreateURL.historical(currencyCrypto, baseCurrency), baseCurrency);\r\n    };\r\n\r\n    return { data, error, loading, fetchHistoricalPrices };\r\n};\r\n\r\nexport default useFetchHistoricalPrices;\r\n","import { useRef } from \"react\";\r\nimport { useMessage } from \"hooks\";\r\n\r\nconst useCheckApiKey = () => {\r\n    const showMessage = useMessage();\r\n\r\n    const isAPIKeyAvailable = useRef(false);\r\n\r\n    if (!process.env.REACT_APP_API_KEY) {\r\n        showMessage.error(`No API key available for application`);\r\n    } else {\r\n        isAPIKeyAvailable.current = true;\r\n    }\r\n    return isAPIKeyAvailable.current;\r\n};\r\n\r\nexport default useCheckApiKey;\r\n","import { useContext, useCallback } from \"react\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport { BaseCurrency, CurrencyCrypto } from \"types\";\r\nimport { SelectedCurrenciesContext } from \"contexts/currenciesContext\";\r\n\r\ninterface Props {\r\n    currencyBase: BaseCurrency;\r\n    currencyCrypto: CurrencyCrypto;\r\n}\r\n/**\r\n * Creates button which - when clicked - accepts chosen currencies to context and switches to page wit results\r\n * @param props currency base: base currency, currencyCrypto: cryptocurrency\r\n * @returns button component\r\n */\r\nconst useConfirmChoice = (props: Props) => {\r\n    const { currencyBase, currencyCrypto } = props;\r\n    const navigate = useNavigate();\r\n    const { setCurrencyBase, setCurrencyCrypto } = useContext(SelectedCurrenciesContext);\r\n    const isEnabled = currencyBase && currencyCrypto ? true : false;\r\n    const pathToResults = isEnabled ? `exchange rate for pair ${currencyCrypto.label}:${currencyBase}` : undefined;\r\n\r\n    const confirmChoice = useCallback(() => {\r\n        setCurrencyBase(currencyBase);\r\n        setCurrencyCrypto(currencyCrypto);\r\n        if (pathToResults) navigate(pathToResults, { state: { results: pathToResults } });\r\n        // eslint-disable-next-line react-hooks/exhaustive-deps\r\n    }, [pathToResults]);\r\n\r\n    return { confirmChoice, isEnabled };\r\n};\r\n\r\nexport default useConfirmChoice;\r\n","import { ApiResponse } from \"types\";\r\n/**\r\n * Takes response from list of all cryptos API and creates array with desired content\r\n * @param obj\r\n * @returns array with code, name and link to logo of all available cryptocurrencies\r\n */\r\nconst createOptions = (obj: ApiResponse) => {\r\n    const data = obj.data.Data;\r\n\r\n    const result = [];\r\n\r\n    for (let item in data) {\r\n        if (data.hasOwnProperty(item)) {\r\n            result.push({\r\n                value: item,\r\n                label: data[item].CoinName,\r\n                image: data[item].ImageUrl,\r\n                description: data[item].Description,\r\n            });\r\n        }\r\n    }\r\n\r\n    return result;\r\n};\r\n\r\nexport default createOptions;\r\n","import axios from \"axios\";\r\n\r\nimport { useEffect } from \"react\";\r\nimport { BASE_URL } from \"config\";\r\nimport { useQuery } from \"react-query\";\r\nimport useMessage from \"./useMessage\";\r\nimport createOptions from \"functions/createOptions\";\r\nimport { ApiResponse } from \"types/types\";\r\n\r\nconst useFetchListOfCryptos = () => {\r\n    const showMessage = useMessage();\r\n\r\n    const { isLoading, error, data } = useQuery([URL], () => axios(BASE_URL.get(\"all\")), {\r\n        staleTime: 300000,\r\n        cacheTime: 300000,\r\n        select: data => createOptions(data as unknown as ApiResponse),\r\n    });\r\n\r\n    useEffect(() => {\r\n        error && showMessage.error(`Błąd pobierania listy kryptowalut`);\r\n        // eslint-disable-next-line react-hooks/exhaustive-deps\r\n    }, [error]);\r\n\r\n    return { isLoading, data };\r\n};\r\n\r\nexport default useFetchListOfCryptos;\r\n","import { useCallback, useState } from \"react\";\r\n\r\nfunction useBoolean(initialValue: boolean = false) {\r\n    const [value, setValue] = useState(initialValue);\r\n\r\n    function setTrue() {\r\n        setValue(true);\r\n    }\r\n\r\n    const setFalse = useCallback(() => {\r\n        setValue(false);\r\n    }, []);\r\n\r\n    const toggle = useCallback(() => {\r\n        setValue(!value);\r\n    }, [value]);\r\n\r\n    return [value, setTrue, setFalse, toggle] as const;\r\n}\r\n\r\nexport default useBoolean;\r\n","import { useCallback } from \"react\";\nimport debounce from \"lodash/debounce\";\n\n// export const useDebouncedCallback = (fn: Function, args: any): React.MouseEventHandler<HTMLButtonElement> => {\n//     // eslint-disable-next-line react-hooks/exhaustive-deps\n//     const result = useCallback(\n//         debounce(() => {\n//             fn(args);\n//         }, 200),\n//         [fn]\n//     );\n//     return result;\n// };\n\n// export default useDebouncedCallback;\n\nfunction useDebouncedCallback<T>(fn: Function, args?: any): React.MouseEventHandler<T> {\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    const result: React.MouseEventHandler<T> = useCallback(\n        debounce(() => {\n            fn(args);\n        }, 200),\n        [fn, args]\n    );\n    return result;\n}\n\nexport default useDebouncedCallback;\n","import { useEffect, useRef, useState } from \"react\";\r\n\r\nconst DELAY = 1000;\r\nconst DURATION = 1000;\r\n\r\nexport const useDelayedCondition = (condition: boolean, delay = DELAY, duration = DURATION) => {\r\n  const [delayedCondition, setDelayedCondition] = useState(false);\r\n  const delayTimeout = useRef(undefined as undefined | NodeJS.Timeout);\r\n  const startTime = useRef(undefined as undefined | number);\r\n  const durationTimeout = useRef(undefined as undefined | NodeJS.Timeout);\r\n\r\n  useEffect(() => {\r\n    if (condition) {\r\n      startTime.current = Date.now();\r\n      delayTimeout.current = setTimeout(() => {\r\n        setDelayedCondition(true);\r\n      }, delay);\r\n    }\r\n    if (!condition) {\r\n      if (startTime.current) {\r\n        if (Date.now() >= startTime.current + delay) {\r\n          durationTimeout.current = setTimeout(() => {\r\n            delayTimeout.current && clearTimeout(delayTimeout.current);\r\n            setDelayedCondition(false);\r\n          }, duration - (Date.now() - (startTime.current + DELAY)));\r\n        }\r\n        if (Date.now() < startTime.current + delay) {\r\n          delayTimeout.current && clearTimeout(delayTimeout.current);\r\n          setDelayedCondition(false);\r\n        }\r\n      }\r\n    }\r\n    return () => {\r\n      delayTimeout.current && clearTimeout(delayTimeout.current);\r\n      durationTimeout.current && clearTimeout(durationTimeout.current);\r\n    };\r\n  }, [condition]);\r\n\r\n  return delayedCondition;\r\n};\r\n\r\nexport default useDelayedCondition;\r\n","import { useMessage } from \"hooks\";\r\nimport { Loader } from \"components\";\r\n\r\ninterface Props {\r\n    isOK: boolean;\r\n    error: unknown;\r\n    crypto: string;\r\n}\r\n/**\r\n * creates indicators for loading and error\r\n * @param result  result of fetch operation\r\n * @param error possible error in fetch operation\r\n * @param crypto name of current cryptocurrency\r\n * @returns component\r\n */\r\nconst FetchStatusIndicator = (props: Props) => {\r\n    const { isOK, error, crypto } = props;\r\n    const showMessage = useMessage();\r\n\r\n    error && showMessage.error(`Podczas pobierania danych bieżących dla ${crypto} wystąpił błąd `);\r\n\r\n    if (!isOK) return <Loader />;\r\n\r\n    return null;\r\n};\r\n\r\nexport default FetchStatusIndicator;\r\n","import { Grow } from \"@mui/material\";\r\n\r\nimport { Changes, CryptoCurrencyCurrentPrice, GeneralInformation, InvestButton, Logo } from \"../components\";\r\nimport { CryptoContainer } from \"./styles\";\r\nimport { CurrencyCrypto, ResultsType } from \"types\";\r\n\r\nimport \"../styles/_ResultsTable.scss\";\r\n\r\ninterface Props {\r\n    currencyCrypto: CurrencyCrypto;\r\n    results: ResultsType;\r\n}\r\n/**\r\n * creates array with all provided informations about crypto\r\n * @param props\r\n * @returns\r\n */\r\nconst ResultsTable = (props: Props) => {\r\n    const { currencyCrypto, results } = props;\r\n\r\n    return (\r\n        <CryptoContainer>\r\n            <Grow in={true} timeout={1000}>\r\n                <section className=\"DataContainer\" aria-label=\"query data\">\r\n                    <GeneralInformation currencyCryptoName={currencyCrypto.label} />\r\n                    {currencyCrypto.imageURL && <Logo imageURL={currencyCrypto.imageURL} />}\r\n                    <div className=\"PricesWithButtons\">\r\n                        {results!.currentPrice && <CryptoCurrencyCurrentPrice currentPrice={results!.currentPrice} />}\r\n                        {results!.changes && <Changes changesArray={results!.changes} />}\r\n                        <InvestButton />\r\n                    </div>\r\n                </section>\r\n            </Grow>\r\n        </CryptoContainer>\r\n    );\r\n};\r\n\r\nexport default ResultsTable;\r\n","import { Typography } from \"@mui/material\";\r\nimport \"../styles/_CurrentPrice.scss\";\r\n\r\n/**\r\n * Displays cell with current cryptocurrency price\r\n * @param props object with current cryptocurrency price data\r\n * @returns component\r\n */\r\ninterface Props {\r\n    currentPrice: { [key: string]: string };\r\n}\r\n\r\nconst CurrentPrice = (props: Props) => {\r\n    const { currentPrice } = props;\r\n\r\n    return (\r\n        <div className=\"cell\">\r\n            <Typography variant=\"purpleText\">{Object.values(currentPrice)[0]}</Typography>\r\n            <Typography variant=\"greyText\">{Object.keys(currentPrice)[0]}</Typography>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default CurrentPrice;\r\n","import { memo } from \"react\";\r\nimport \"../styles/_generalInformation.scss\";\r\n\r\ninterface Props {\r\n    currencyCryptoName: string;\r\n}\r\n/**\r\n * Renders general information about cryptocurrency\r\n * @param {string} name cryptocurrency nam\r\n * @returns memoised component\r\n */\r\nconst GeneralInfo = memo((props: Props) => {\r\n    const { currencyCryptoName } = props;\r\n    return (\r\n        <div className=\"GeneralInformation\">\r\n            <div className=\"title\">{currencyCryptoName}</div>\r\n            <div className=\"foundation\">{`${currencyCryptoName} foundation`}</div>\r\n            <div className=\"altcoins\">Altcoins - hightest growth</div>\r\n        </div>\r\n    );\r\n});\r\n\r\nexport default GeneralInfo;\r\n","import { memo } from \"react\";\r\nimport Button from \"@mui/material/Button\";\r\nimport Tooltip from \"@mui/material/Tooltip\";\r\n\r\nimport \"../styles/_InvestButton.scss\";\r\n\r\nconst tooltipStyle = {\r\n    backgroundColor: \"#F5C200\",\r\n    border: `1px solid \"#EE760A\"`,\r\n    boxShadow: `inset 0 0 5px \"#EE760A\"`,\r\n    color: \"rgba(0, 0, 0, 0.87)\",\r\n    fontSize: 11,\r\n};\r\n\r\n/**\r\n * creates button which could be in the future used for investing\r\n * @returns button component\r\n */\r\nconst InvestButton = () => {\r\n    return (\r\n        <div className=\"cell\">\r\n            <div className=\"InvestWrapper\">\r\n                <Tooltip\r\n                    componentsProps={{ tooltip: { sx: tooltipStyle } }}\r\n                    title=\"Ta funkcjonalność nie jest jeszcze zaimplementowana\"\r\n                    placement=\"top-start\"\r\n                >\r\n                    <Button variant=\"contained\" color=\"error\" size=\"small\">\r\n                        Inwestuj\r\n                    </Button>\r\n                </Tooltip>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default memo(InvestButton);\r\n","import { BASE_URL } from \"config\";\r\n\r\ninterface Props {\r\n    imageURL: string;\r\n}\r\n/**\r\n * creates Logo of cryptocurrency. Firstly createscomplete URL\r\n * @param URL string being critical part of URL\r\n * @returns logo component\r\n */\r\nconst Logo = (props: Props) => {\r\n    const { imageURL } = props;\r\n\r\n    const cryptoLogoUrl = BASE_URL.get(\"general\") + imageURL + \"?width=30\";\r\n\r\n    return <img className=\"logo\" src={cryptoLogoUrl} alt={\"Logo\"} />;\r\n};\r\n\r\nexport default Logo;\r\n","import { Typography } from \"@mui/material\";\r\nimport uuid from \"react-uuid\";\r\n\r\nimport { ChangesArray } from \"types\";\r\n\r\ninterface Props {\r\n    changesArray: ChangesArray;\r\n}\r\n/**\r\n * Creates table with historical price and percentage change\r\n * @param changesArray data to be displayed\r\n * @returns component with tabelarised data\r\n */\r\n\r\nconst Changes = (props: Props): JSX.Element => {\r\n    const { changesArray } = props;\r\n\r\n    return (\r\n        <>\r\n            {changesArray.map(change => (\r\n                <div className=\"cell\" key={uuid()}>\r\n                    <Typography variant=\"purpleText\" key={uuid()}>\r\n                        {Object.values(change)[0]}\r\n                    </Typography>\r\n\r\n                    <Typography variant=\"greyText\" key={uuid()}>\r\n                        {Object.keys(change)[0]}\r\n                    </Typography>\r\n                </div>\r\n            ))}\r\n        </>\r\n    );\r\n};\r\n\r\nexport default Changes;\r\n","import React from \"react\";\n\ninterface Props {\n    text: string;\n}\n\nexport const ResultsPageHeader = (props: Props) => {\n    const { text } = props;\n    return (\n        <h1 role=\"banner\" className=\"sr-only\">\n            {text}\n        </h1>\n    );\n};\n\nexport default React.memo(ResultsPageHeader);\n","import { styled } from \"@mui/system\";\nimport { Box } from \"@mui/material\";\n\nexport const CryptoContainer = styled(Box)(({ theme }) => ({\n    width: \"100%\",\n    paddingRight: theme.spacing(2),\n    paddingLeft: theme.spacing(2),\n    marginRight: \"auto\",\n    marginLeft: \"auto\",\n    marginTop: \"30vh\",\n}));\nexport default CryptoContainer;\n","import * as React from \"react\";\r\nimport axios from \"axios\";\r\n\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport { useQuery } from \"react-query\";\r\nimport { useDebouncedCallback, useFetchHistoricalPrices, useMessage } from \"hooks\";\r\nimport { BlueButton } from \"components\";\r\nimport { CreateURL, hasDateChanged, createResults } from \"functions\";\r\nimport { ResultsType, CryptoPrice } from \"types\";\r\nimport { UPDATE_INTERVAL_MILISECONDS } from \"../../config\";\r\nimport { SelectedCurrenciesContext } from \"contexts/currenciesContext\";\r\nimport { ResultsPageHeader } from \"./components\";\r\nconst ResultsTable = React.lazy(() => import(\"./components/ResultsTable\"));\r\nconst FetchStatusIndicator = React.lazy(() => import(\"./components/FetchStatusIndicator\"));\r\n\r\n/**\r\n * Presents cryptocurrency price current and historical\r\n * @returns component\r\n */\r\nconst ResultsPage = (): JSX.Element => {\r\n    const navigate = useNavigate();\r\n    const showMessage = useMessage();\r\n    const { currencyBase, currencyCrypto } = React.useContext(SelectedCurrenciesContext); // tu przemianować na selectedBaseCurrency i selectedCryptoCurrency\r\n    const intervalMs = UPDATE_INTERVAL_MILISECONDS;\r\n    const currentURL = CreateURL.current(currencyCrypto.value, currencyBase);\r\n    const [results, setResults] = React.useState<ResultsType | null>(null);\r\n\r\n    const { data: fetchedCryptocurrencyPrice, error } = useQuery(\r\n        \"currentCrypto\",\r\n        async () => {\r\n            if (hasDateChanged(intervalMs)) {\r\n                fetchHistoricalPrices(currencyCrypto, currencyBase);\r\n            }\r\n            const result = await axios.get(currentURL, { Apikey: process.env.REACT_APP_API_KEY });\r\n\r\n            return result.data;\r\n        },\r\n        {\r\n            refetchInterval: intervalMs,\r\n        }\r\n    );\r\n\r\n    const { data: historicalCryptoPrice, fetchHistoricalPrices } = useFetchHistoricalPrices();\r\n\r\n    const returnToSelectionPage = useDebouncedCallback<HTMLButtonElement>(navigate, \"/\");\r\n\r\n    React.useEffect(() => {\r\n        fetchHistoricalPrices(currencyCrypto, currencyBase);\r\n        // eslint-disable-next-line react-hooks/exhaustive-deps\r\n    }, []);\r\n\r\n    React.useEffect(() => {\r\n        if (fetchedCryptocurrencyPrice && historicalCryptoPrice) {\r\n            let cryptoPrice = fetchedCryptocurrencyPrice[currencyBase] as CryptoPrice;\r\n\r\n            if (typeof cryptoPrice === \"number\") showMessage.success(\"Zmiana\");\r\n            else showMessage.info(\"Na serwerze nie ma danych o bieżącym kursie kryptowaluty\");\r\n\r\n            const result = createResults({ cryptoPrice, historicalCryptoPrice, currencyBase });\r\n            if (JSON.stringify(results) !== JSON.stringify(result)) {\r\n                setResults(result);\r\n            }\r\n        }\r\n        // eslint-disable-next-line react-hooks/exhaustive-deps\r\n    }, [fetchedCryptocurrencyPrice, historicalCryptoPrice]);\r\n\r\n    return (\r\n        <>\r\n            <ResultsPageHeader text=\"Results of query\" />\r\n            <main>\r\n                {(error || !results) && (\r\n                    <React.Suspense fallback={null}>\r\n                        <FetchStatusIndicator crypto={currencyCrypto.label} isOK={Boolean(results)} error={error} />\r\n                    </React.Suspense>\r\n                )}\r\n                {results && <BlueButton label=\"Powrót do wyboru\" clickHandler={returnToSelectionPage} />}\r\n                {results && (\r\n                    <React.Suspense fallback={null}>\r\n                        <ResultsTable currencyCrypto={currencyCrypto} results={results} />\r\n                    </React.Suspense>\r\n                )}\r\n            </main>\r\n        </>\r\n    );\r\n};\r\n\r\nexport default ResultsPage;\r\n"],"names":["data","setData","useState","error","setError","loading","stopLoading","useBoolean","showMessage","useMessage","historicalPrices","fatalError","useCallback","theEndOfRecursiveFetchLoopHandle","length","fetchData","async","endpoints","baseCurrency","URL","shift","reducedEndpoints","axios","Apikey","process","then","hasOwnProperty","push","NotAvailable","label","warning","catch","err","code","response","status","fetchHistoricalPrices","currencyCrypto","CreateURL","isAPIKeyAvailable","useRef","current","props","currencyBase","navigate","useNavigate","setCurrencyBase","setCurrencyCrypto","useContext","SelectedCurrenciesContext","isEnabled","pathToResults","undefined","confirmChoice","state","results","obj","Data","result","item","value","CoinName","image","ImageUrl","description","Description","isLoading","useQuery","BASE_URL","staleTime","cacheTime","select","createOptions","useEffect","initialValue","setValue","setFalse","toggle","fn","args","debounce","DELAY","DURATION","condition","delay","duration","delayedCondition","setDelayedCondition","delayTimeout","startTime","durationTimeout","Date","now","setTimeout","clearTimeout","isOK","crypto","Grow","in","timeout","className","currencyCryptoName","imageURL","currentPrice","changes","changesArray","Typography","variant","Object","values","keys","memo","tooltipStyle","backgroundColor","border","boxShadow","color","fontSize","InvestButton","Tooltip","componentsProps","tooltip","sx","title","placement","Button","size","cryptoLogoUrl","src","alt","map","change","uuid","ResultsPageHeader","text","role","React","CryptoContainer","styled","Box","theme","width","paddingRight","spacing","paddingLeft","marginRight","marginLeft","marginTop","ResultsTable","FetchStatusIndicator","intervalMs","UPDATE_INTERVAL_MILISECONDS","currentURL","setResults","fetchedCryptocurrencyPrice","hasDateChanged","refetchInterval","historicalCryptoPrice","useFetchHistoricalPrices","returnToSelectionPage","useDebouncedCallback","cryptoPrice","success","info","createResults","JSON","stringify","fallback","Boolean","clickHandler"],"sourceRoot":""}